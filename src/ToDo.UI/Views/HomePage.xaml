<Page x:Class="ToDo.Views.HomePage"
	  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	  xmlns:converters="using:ToDo.Converters"
	  xmlns:local="using:ToDo.Views"
	  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	  xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
	  xmlns:uen="using:Uno.Extensions.Navigation.UI"
	  xmlns:uer="using:Uno.Extensions.Reactive.UI"
	  xmlns:um="using:Uno.Material"
	  xmlns:utu="using:Uno.Toolkit.UI"
	  xmlns:not_win="http://uno.ui/not_win"
	  Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
	  mc:Ignorable="d not_win">

	<Page.Resources>
		<x:String x:Key="Icon_Add">F1 M 14 8 L 8 8 L 8 14 L 6 14 L 6 8 L 0 8 L 0 6 L 6 6 L 6 0 L 8 0 L 8 6 L 14 6 L 14 8 Z</x:String>
		<x:String x:Key="Icon_Search">F1 M 12.5 11 L 11.710000038146973 11 L 11.430000305175781 10.729999542236328 C 12.410000324249268 9.589999556541443 13 8.110000014305115 13 6.5 C 13 2.9100000858306885 10.089999914169312 0 6.5 0 C 2.9100000858306885 0 0 2.9100000858306885 0 6.5 C 0 10.089999914169312 2.9100000858306885 13 6.5 13 C 8.110000014305115 13 9.589999556541443 12.410000324249268 10.729999542236328 11.430000305175781 L 11 11.710000038146973 L 11 12.5 L 16 17.489999771118164 L 17.489999771118164 16 L 12.5 11 L 12.5 11 Z M 6.5 11 C 4.009999990463257 11 2 8.990000009536743 2 6.5 C 2 4.009999990463257 4.009999990463257 2 6.5 2 C 8.990000009536743 2 11 4.009999990463257 11 6.5 C 11 8.990000009536743 8.990000009536743 11 6.5 11 Z</x:String>
		<x:String x:Key="Icon_House_Siding">F1 M 17 9 L 20 9 L 10 0 L 0 9 L 3 9 L 3 17 L 5 17 L 5 15 L 15 15 L 15 17 L 17 17 L 17 9 Z M 5.210000038146973 7 L 14.790000915527344 7 L 15 7.189999580383301 L 15 9 L 5 9 L 5 7.189999580383301 L 5.210000038146973 7 Z M 12.569999694824219 5 L 7.430000305175781 5 L 10 2.690000057220459 L 12.569999694824219 5 Z M 5 13 L 5 11 L 15 11 L 15 13 L 5 13 Z</x:String>
		<x:String x:Key="Icon_Star_Rate">F1 M 12.430000305175781 8 L 10 0 L 7.569999694824219 8 L 0 8 L 6.180000305175781 12.40999984741211 L 3.8299999237060547 20 L 10 15.309999465942383 L 16.18000030517578 20 L 13.829999923706055 12.40999984741211 L 20 8 L 12.430000305175781 8 Z</x:String>
		<x:String x:Key="Icon_List">F1 M 0 6 L 2 6 L 2 4 L 0 4 L 0 6 Z M 0 10 L 2 10 L 2 8 L 0 8 L 0 10 Z M 0 2 L 2 2 L 2 0 L 0 0 L 0 2 Z M 4 6 L 18 6 L 18 4 L 4 4 L 4 6 Z M 4 10 L 18 10 L 18 8 L 4 8 L 4 10 Z M 4 0 L 4 2 L 18 2 L 18 0 L 4 0 Z</x:String>

		<x:Double x:Key="SplitModeSidePaneWidth">280</x:Double>
		<x:Double x:Key="SplitModeThresholdWidth">800</x:Double>

		<converters:TaskListConverter x:Key="TaskListIconConverter"
									  ImportantValue="{StaticResource Icon_Star_Rate}"
									  TasksValue="{StaticResource Icon_House_Siding}"
									  DefaultValue="{StaticResource Icon_List}" />

		<converters:TaskListConverter x:Key="TaskListIconForegroundConverter"
									  ImportantValue="{StaticResource MaterialErrorBrush}"
									  TasksValue="{StaticResource MaterialPrimaryVariantDarkBrush}"
									  DefaultValue="{StaticResource MaterialPrimaryVariantLightBrush}" />
	</Page.Resources>

	<muxc:NavigationView x:Name="NavView"
						 MenuItemsSource="{Binding WellKnownLists}"
						 FooterMenuItemsSource="{Binding CustomLists}"
						 AlwaysShowHeader="True"
						 PaneDisplayMode="LeftMinimal"
						 OpenPaneLength="{StaticResource SplitModeSidePaneWidth}"
						 IsPaneToggleButtonVisible="False"
						 IsSettingsVisible="False"
						 CompactPaneLength="0"
						 CompactModeThresholdWidth="801"
						 ExpandedModeThresholdWidth="{StaticResource SplitModeThresholdWidth}"
						 Style="{StaticResource HomeNavigationViewStyle}">

		<!-- Header: Profile (Setting button) + Search button -->
		<muxc:NavigationView.PaneHeader>
			<Grid Grid.Row="0"
				  Padding="16,8"
				  ColumnSpacing="8">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<PersonPicture Grid.Column="0"
							   DisplayName="{Binding CurrentUser.Name}"
							   d:ProfilePicture="{Binding CurrentUser.AvatarUrl}"
							   Width="40"
							   Height="40"
							   VerticalAlignment="Center" />

				<TextBlock Grid.Column="1"
						   Text="{Binding CurrentUser.Name}"
						   VerticalAlignment="Center" />

				<!-- This is a hack to allow both picture and textblock to respond to tap event -->
				<Border Background="Transparent"
						uen:Navigation.Request="Settings"
						Grid.ColumnSpan="2" />

				<PathIcon Grid.Column="2"
						  Data="{StaticResource Icon_Search}"
						  VerticalAlignment="Center"
						  uen:Navigation.Request="!TaskSearch" />
			</Grid>
		</muxc:NavigationView.PaneHeader>

		<!-- Task Lists: template for WellKnownLists & CustomLists -->
		<muxc:NavigationView.MenuItemTemplate>
			<DataTemplate>
				<muxc:NavigationViewItem Content="{Binding DisplayName}"
										 uen:Navigation.Request="./TaskList"
										 uen:Navigation.Data="{Binding}">
					<muxc:NavigationViewItem.Icon>
						<PathIcon Data="{Binding Converter={StaticResource TaskListIconConverter}}" Foreground="{Binding Converter={StaticResource TaskListIconForegroundConverter}}" />
					</muxc:NavigationViewItem.Icon>
				</muxc:NavigationViewItem>
			</DataTemplate>
		</muxc:NavigationView.MenuItemTemplate>

		<!-- Footer: New List -->
		<muxc:NavigationView.PaneFooter>
			<Border Padding="16">
				<Button Content="Add a list"
						Command="{Binding CreateTaskList}"
						x:Uid="HomePage_CreateTaskList"
						HorizontalAlignment="Stretch"
						HorizontalContentAlignment="Left"
						Style="{StaticResource MaterialTextButtonStyle}">
					<um:ControlExtensions.Icon>
						<PathIcon Data="{StaticResource Icon_Add}" />
					</um:ControlExtensions.Icon>
				</Button>
			</Border>
		</muxc:NavigationView.PaneFooter>

		<Grid uen:Region.Navigator="Visibility" uen:Region.Attached="True" />
	</muxc:NavigationView>

</Page>
